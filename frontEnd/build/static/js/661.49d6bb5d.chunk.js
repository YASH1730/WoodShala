"use strict";(self.webpackChunkadminpanel=self.webpackChunkadminpanel||[]).push([[661],{7661:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var a=n(2982),i=n(1413),r=n(5861),o=n(885),s=n(4687),d=n.n(s),c=n(9891),l=n(8316),u=n(4554),h=n(68),p=n(3400),v=n(890),m=n(1889),f=n(5712),x=n(7391),Z=n(6151),w=n(792),g=n(2739),j=n(627),_=n(2791),b=n(6654),C=n(2881),y=n(9434),S=n(9e3),P=n(7247),N=n(1686),k=n(2419),M=n(3746),I=n(2674),D=n(1428),z=n(5130),R=n(6881),T=n(7477),U=n(184),L={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"15px",width:500,bgcolor:"background.paper",boxShadow:24,p:2};function K(e){e.admin,e.customer;return(0,U.jsx)(u.Z,{className:"displayScreen"})}function H(e){var t=e.state,n=e.setState;function o(){var e=new Date;return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()+" @ "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}function s(){return(s=(0,r.Z)(d().mark((function e(r){var s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,console.log(r.target.reply.value),s={message:r.target.reply.value,time:o(),date:new Date},(c=new FormData).append("reply",JSON.stringify([s])),c.append("_id",t.ID),e.next=9,(0,b.Bn)(c);case 9:200===e.sent.status&&n((function(e){return(0,i.Z)((0,i.Z)({},e),{},{admin:[].concat((0,a.Z)(e.admin),[s])})})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}return(0,U.jsx)("div",{children:(0,U.jsx)(w.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:t.open,onClose:function(){return n((function(e){return(0,i.Z)((0,i.Z)({},e),{},{open:!1})}))},closeAfterTransition:!0,BackdropComponent:g.Z,BackdropProps:{timeout:500},children:(0,U.jsx)(j.Z,{in:t.open,children:(0,U.jsxs)(u.Z,{sx:L,children:[(0,U.jsx)(v.Z,{id:"transition-modal-title",variant:"h6",component:"h2",children:"Reply Box"}),(0,U.jsx)(u.Z,{className:"messageContainer",component:"form",onSubmit:function(e){return s.apply(this,arguments)},method:"post",action:"",children:(0,U.jsxs)(m.ZP,{container:!0,className:"innerMessageContainer",children:[(0,U.jsx)(m.ZP,{xs:12,children:(0,U.jsx)(K,{customer:t.customer,admin:t.admin})}),(0,U.jsx)(m.ZP,{xs:9.5,className:"messageField",children:(0,U.jsx)(x.Z,{fullWidth:!0,size:"small",label:"Reply",type:"text",name:"reply",variant:"outlined"})}),(0,U.jsx)(m.ZP,{xs:2,className:"sendButton",children:(0,U.jsx)(Z.Z,{fullWidth:!0,color:"primary",variant:"contained",size:"small",type:"submit",endIcon:(0,U.jsx)(N.Z,{}),children:"Send"})})]})})]})})})})}var V=function(){var e=(0,_.useState)(""),t=(0,o.Z)(e,2),n=t[0],a=(t[1],(0,_.useState)([])),s=(0,o.Z)(a,2),w=s[0],g=s[1],j=(0,_.useState)({P_SKU:[],H_SKU:[]}),N=(0,o.Z)(j,2),L=N[0],K=N[1],V=(0,_.useState)({data:[],isLoading:!1,page:1,limit:10,total:0,product_id:"",total_review:0,active_review:0,hide_review:0}),O=(0,o.Z)(V,2),A=O[0],B=O[1],F=(0,_.useState)({open:!1,customer:[],admin:[],ID:""}),W=(0,o.Z)(F,2),Y=W[0],E=W[1],J=(0,I.N)(),q={labels:{confirmable:"Proceed",cancellable:"Cancel"}},G=(0,y.I0)();function Q(){return X.apply(this,arguments)}function X(){return(X=(0,r.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B((function(e){return(0,i.Z)((0,i.Z)({},e),{},{isLoading:!0})})),e.next=4,(0,b.Tn)({page:A.page,limit:A.limit,total:A.total,product_id:A.product_id});case 4:(t=e.sent)&&(g(t.data.data.map((function(e,t){return e.hide}))),B((function(e){return(0,i.Z)((0,i.Z)({},e),{},{data:t.data.data.map((function(e,t){return{id:t+1,CID:e.CID,product_id:e.product_id,rating:e.rating,review:e.review,admin_reply:e.admin_reply,review_title:e.review_title,review_images:e.review_images,review_videos:e.review_videos,yourTube_url:e.yourTube_url,reviewer_name:e.reviewer_name,reviewer_email:e.reviewer_email,hide:e.hide,date:e.date,action:e}})),isLoading:!1,total:t.data.total,filter:!1,total_review:t.data.total,active_review:t.data.active,hide_review:t.data.hide})}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("err>>",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}(0,_.useMemo)((function(){Q()}),[A.page,A.limit,A.filter]),(0,_.useMemo)((function(){(0,b.IC)().then((function(e){B((function(t){return(0,i.Z)((0,i.Z)({},t),{},{total_review:e.data.total,active_review:e.data.active,hide_review:e.data.hide})}))}))}),[A.data,w]);var $=[{field:"id",headerName:"ID",width:50},{field:"CID",headerName:"CID",width:100},{field:"hide",headerName:"Status",width:100,renderCell:function(e){return(0,U.jsx)(c.Z,{onChange:ee,name:"".concat(e.row.action._id+" "+(e.row.id-1)),checked:w[e.row.id-1]})}},{field:"product_id",headerName:"Product ID",width:100},{field:"reviewer_name",headerName:"Name",width:150},{field:"reviewer_email",headerName:"Email",width:150},{field:"rating",headerName:"Rating",width:150,renderCell:function(e){return(0,U.jsx)(l.Z,{readOnly:!0,value:parseInt(e.formattedValue),precision:.5})}},{field:"review_title",headerName:"Review Title",width:110},{field:"review",headerName:"Review",width:110},{field:"yourTube_url",headerName:"Your Tube",width:110},{field:"date",headerName:"Review At",width:110},{field:"action",headerName:"Actions",width:250,renderCell:function(e){return(0,U.jsxs)(u.Z,{sx:{display:"flex",gap:"5px"},children:[(0,U.jsx)(h.Z,{title:"Update",children:(0,U.jsx)(p.Z,{onClick:function(){G((0,C.iO)({state:!0,formType:"update_review",payload:e,setRow:B}))},"aria-label":"update",children:(0,U.jsx)(S.Z,{})})}),(0,U.jsx)(h.Z,{title:"Delete",children:(0,U.jsx)(p.Z,{onClick:function(t){!function(e,t,n){e.preventDefault(),J({description:"Review will be removed from Database !!!"},q).then((0,r.Z)(d().mark((function e(){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:(a=e.sent)&&(B((function(e){return(0,i.Z)((0,i.Z)({},e),{},{data:e.data.filter((function(e){return e.action._id!==n})),total:e.total-1})})),G((0,C.br)({open:!0,variant:"success",message:a.data.message})));case 4:case"end":return e.stop()}}),e)})))).catch((function(e){console.log("Operation cancelled because. ",e)}))}(t,b.i0,e.formattedValue._id)},children:(0,U.jsx)(P.Z,{})})})]})}}],ee=function(e){console.log(e.target.name),console.log(w);var t=e.target.name.split(" "),n=new FormData;n.append("_id",t[0]),n.append("hide",e.target.checked),(0,b.T8)(n).then((function(e){g(w.map((function(e,n){return parseInt(t[1])===n?!e:e}))),G((0,C.br)({open:!0,variant:"success",message:"Review Status Updated Successfully !!!"}))})).catch((function(e){G((0,C.br)({open:!0,variant:"error",message:"Something went wrong !!!"}))}))};function te(){return(0,U.jsx)("div",{style:{marginTop:"2%",height:400,width:"100%"},children:(0,U.jsx)(T._,{rows:A.data,rowCount:A.total,loading:A.isLoading,rowsPerPageOptions:[10,30,50,70,100],filterModel:{items:[{columnField:"product_title",operatorValue:"contains",value:"".concat(A.title)}]},pagination:!0,pageSize:A.limit,page:A.page-1,limit:A.limit,paginationMode:"server",onPageChange:function(e){B((function(t){return(0,i.Z)((0,i.Z)({},t),{},{page:e+1})}))},onPageSizeChange:function(e){return B((function(t){return(0,i.Z)((0,i.Z)({},t),{},{limit:e})}))},columns:$})})}function ne(e){return ae.apply(this,arguments)}function ae(){return(ae=(0,r.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=setTimeout((function(){(0,b.hM)(t.target.value).then((function(e){K((function(t){return(0,i.Z)((0,i.Z)({},t),{},{P_SKU:e.data.P_SKU,H_SKU:e.data.H_SKU})}))})).catch((function(e){K((function(e){return(0,i.Z)((0,i.Z)({},e),{},{P_SKU:[],H_SKU:[]})}))}))}),1e3),e.abrupt("return",(function(){return clearTimeout(n)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,U.jsxs)(u.Z,{sx:{pl:4,pr:4},children:[(0,U.jsx)(v.Z,{component:"span",sx:{display:"block"},variant:"h5",children:"Review"}),(0,U.jsxs)(m.ZP,{container:!0,className:"reviewMeta",p:2,children:[(0,U.jsxs)(m.ZP,{className:"reviewMetaItem",sx:{backgroundColor:"#7f5cf7ab"},item:!0,xs:12,md:3.8,children:[(0,U.jsx)(R.Z,{}),(0,U.jsx)(v.Z,{variant:"h4",children:"Total"}),(0,U.jsx)(v.Z,{variant:"h6",children:A.total_review})]}),(0,U.jsxs)(m.ZP,{className:"reviewMetaItem",sx:{backgroundColor:"#0091ff8c"},item:!0,xs:12,md:3.8,children:[(0,U.jsx)(D.Z,{}),(0,U.jsx)(v.Z,{variant:"h4",children:"Active"}),(0,U.jsx)(v.Z,{variant:"h6",children:A.active_review})]}),(0,U.jsxs)(m.ZP,{className:"reviewMetaItem",sx:{backgroundColor:"#f73b3bb5"},item:!0,xs:12,md:3.8,children:[(0,U.jsx)(z.Z,{}),(0,U.jsx)(v.Z,{variant:"h4",children:"Hide"}),(0,U.jsx)(v.Z,{variant:"h6",children:A.hide_review})]})]}),(0,U.jsxs)(m.ZP,{mt:1,container:!0,p:2,sx:{boxShadow:1,borderRadius:2,justifyContent:"space-between",alignItems:"center ",gap:"10px"},children:[(0,U.jsx)(m.ZP,{item:!0,xs:12,md:7.8,children:(0,U.jsx)(f.Z,{freeSolo:!0,size:"small",fullWidth:!0,noOptionsText:"ex : P-01001",autoHighlight:!0,disableClearable:!0,id:"combo-box-demo",options:L.P_SKU.map((function(e){return e.SKU})),renderInput:function(e){return(0,U.jsx)(x.Z,(0,i.Z)((0,i.Z)({onKeyUpCapture:ne,value:n||""},e),{},{label:"Product SKU",onChange:function(e){B((function(t){return(0,i.Z)((0,i.Z)({},t),{},{product_id:e.target.value})}))}}))},onChange:function(e,t){console.log(t),B((function(e){return(0,i.Z)((0,i.Z)({},e),{},{product_id:t})}))}})}),(0,U.jsx)(m.ZP,{item:!0,xs:12,md:2,children:(0,U.jsx)(Z.Z,{fullWidth:!0,variant:"contained",startIcon:(0,U.jsx)(M.Z,{}),onClick:Q,children:"Show Reviews"})}),(0,U.jsx)(m.ZP,{item:!0,xs:12,md:2,children:(0,U.jsx)(Z.Z,{fullWidth:!0,variant:"contained",startIcon:(0,U.jsx)(k.Z,{}),onClick:function(){return G((0,C.iO)({state:!0,formType:"review",setRow:B,row:A,setCheck:g}))},children:"Add Review"})})]}),(0,U.jsx)(m.ZP,{container:!0,mt:2,className:"overviewContainer",children:(0,U.jsxs)(m.ZP,{item:!0,p:2,xs:12,md:12,sx:{boxShadow:2,borderRadius:5},children:[(0,U.jsxs)(v.Z,{component:"span",variant:"h6",children:[" ","Review List"," "]}),(0,U.jsx)(te,{})]})}),(0,U.jsx)(H,{state:Y,setState:E})]})}},2419:function(e,t,n){var a=n(4836);t.Z=void 0;var i=a(n(5649)),r=n(184),o=(0,i.default)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=o},5130:function(e,t,n){var a=n(4836);t.Z=void 0;var i=a(n(5649)),r=n(184),o=(0,i.default)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=o},9e3:function(e,t,n){var a=n(4836);t.Z=void 0;var i=a(n(5649)),r=n(184),o=(0,i.default)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Create");t.Z=o},7247:function(e,t,n){var a=n(4836);t.Z=void 0;var i=a(n(5649)),r=n(184),o=(0,i.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=o},1428:function(e,t,n){var a=n(4836);t.Z=void 0;var i=a(n(5649)),r=n(184),o=(0,i.default)((0,r.jsx)("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done");t.Z=o},6881:function(e,t,n){var a=n(4836);t.Z=void 0;var i=a(n(5649)),r=n(184),o=(0,i.default)((0,r.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-6.43 9.57L12 15l-1.57-3.43L7 10l3.43-1.57L12 5l1.57 3.43L17 10l-3.43 1.57z"}),"Reviews");t.Z=o},1686:function(e,t,n){var a=n(4836);t.Z=void 0;var i=a(n(5649)),r=n(184),o=(0,i.default)((0,r.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.Z=o},3746:function(e,t,n){var a=n(4836);t.Z=void 0;var i=a(n(5649)),r=n(184),o=(0,i.default)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");t.Z=o}}]);
//# sourceMappingURL=661.49d6bb5d.chunk.js.map